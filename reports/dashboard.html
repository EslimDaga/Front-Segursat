{% extends "base.html" %}
{% load static %}
{% block head_content %}
  <title>Dashboard - Segursat GPS</title>
  <!-- Begin Page Level Plugins/Custom -->
  <link href="{% static 'assets/css/dashboard/dash_1.css' %}" rel="stylesheet" type="text/css" />
  <link href="{% static 'assets/css/dashboard/dash_2.css' %}" rel="stylesheet" type="text/css" />
  <link href="{% static 'plugins/chartjs/chartist.min.css' %}" rel="stylesheet" type="text/css"/>
  <link href="{% static 'assets/css/users/user-profile.css' %}" rel="stylesheet" type="text/css" />
  <link href="{% static 'assets/css/elements/breadcrumb.css' %}" rel="stylesheet" type="text/css" />
  <!-- End Page Level Plugins/Custon -->
{% endblock %}
{% block container %}
<!-- Begin Content Area -->
<div id="content" class="main-content">
  <div class="layout-px-spacing">
    <div class="row layout-top-spacing">
      <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 layout-spacing">
        <div class="breadcrumb-four">
          <ul class="breadcrumb">
            <li><a href="{% url 'dashboard' %}"><i class="fas fa-home h5"></i></a>
            </li>
            <li class="active">
              <a class="d-flex" href="{% url 'dashboard' %}">
                <i class="fas fa-rocket h5 pr-2"></i>
                Dashboard
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-sm-6 col-12 responsive-header-menu">
        <div class="d-flex flex-row-reverse bd-highlight">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <h6 class="text-center"><mark style="font-size: 12px;">ðŸ“… &nbsp; Fecha/Hora: {{ now }}</mark></h6>
            </li>
          </ol>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ units_transmitting }}</h6>
                  <p class="">Unidades Reportando
                  </p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ units_not_transmitted }}</h6>
                  <p class="">Unidades sin Reportar</p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell-off"><path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ units_in_motion }}</h6>
                  <p class="">Unidades en Movimiento</p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-truck"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ units_stopped }}</h6>
                  <p class="">Unidades Detenidas</p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pause"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-chart-two">
          <div class="widget-heading">
            <h5>Unidades Reportando</h5>
          </div>
          <div class="widget-content">
            <div class="w-chart">
              <canvas id="chart1" height="150"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget-two">
          <div class="widget-content">
            <div class="w-numeric-value">
              <div class="w-content">
                <span class="w-value pb-3">Unidades en Movimiento</span>
              </div>
              <div class="w-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-award"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>
              </div>
            </div>
            <div class="w-chart-2">
              <canvas id="chart2" height="150"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ panic_alert }}</h6>
                  <p class=""> Alerta de PÃ¡nico
                  </p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ battery_alert }}</h6>
                  <p class="">Alerta de BaterÃ­a</p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-battery"><rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ speed_alert }}</h6>
                  <p class="">Alerta de Velocidad</p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-activity"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-card-four">
          <div class="widget-content">
            <div class="w-content">
              <div class="w-info">
                  <h6 class="value pb-3">{{ other_alert }}</h6>
                  <p class="">Otros</p>
              </div>
              <div class="">
                <div class="w-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sliders"><line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget widget-chart-two">
          <div class="widget-heading">
            <h5 class="pb-3">Alertas - Diagrama de Torta</h5>
          </div>
          <div class="widget-content">
            <div class="w-chart-3">
              <canvas id="chart3" height="150"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
        <div class="widget-two">
          <div class="widget-content">
            <div class="w-numeric-value">
              <div class="w-content">
                <span class="w-value pb-3">Alertas - Grafico de Torta</span>
              </div>
              <div class="w-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-award"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>
              </div>
            </div>
            <div class="w-chart-4">
              <canvas id="chart4" height="150"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% include 'includes/footer.html' %}
</div>
<!-- End Content Area -->
{% endblock %}
{% block script_content %}
<!-- Begin Page Level Plugin/Custon -->
<script src="{% static 'plugins/chartjs/Chart.min.js' %}"></script>
<script>
  const units_transmitting = parseInt("{{units_transmitting}}");
  const units_not_transmitted = parseInt("{{units_not_transmitted}}");
  const units_in_motion = parseInt("{{units_in_motion}}");
  const units_stopped = parseInt("{{units_stopped}}");
  // Pie chart 1
  new Chart(document.getElementById("chart1"), {
      type: 'pie',
      data: {
        labels: ["Unidades reportando", "Unidades sin reportar"],
        datasets: [{
          label: "Reporte de unidades",
          backgroundColor: ["#66F035", "#ff6384"],
          data: [units_transmitting,units_not_transmitted]
        }]
      },
      options: {
        title: {
          display: true,
          text: 'Grafico del porcentaje de unidades reportando para esta cuenta'
        }
      }
    });

  // Pie chart 2
  new Chart(document.getElementById("chart2"), {
      type: 'pie',
      data: {
        labels: ["Unidades en movimiento", "Unidades detenidas"],
        datasets: [{
          label: "Reporte de unidades",
          backgroundColor: ["#66F035", "#ff6384"],
          data: [units_in_motion,units_stopped]
        }]
      },
      options: {
        title: {
          display: true,
          text: 'Grafico del porcentaje de alertas producidas para esta cuenta'
        }
      }
    });

    //Bar chart 3
    new Chart(document.getElementById("chart3"), {
      type: 'bar',
      data: {
        labels: ["PÃ¡nico", "BaterÃ­a", "Velocidad", "Otros"],
        datasets: [{
          label: "Alertas (unidades)",
          backgroundColor: ["#ff6384", "#ffcd56", "#36a2eb", "#d251ee"],
          data: [0,1,1,0]
        }]
      },
      options: {
        legend: { display: false },
        title: {
          display: true,
          text: 'Grafico de la cantidad de alertas producidas para esta cuenta'
        }
      }
    });

    //Bar chart 3
    new Chart(document.getElementById("chart4"), {
      type: 'pie',
      data: {
        labels: ["PÃ¡nico", "BaterÃ­a", "Velocidad", "Otros"],
        datasets: [{
          label: "Alertas (unidades)",
          backgroundColor: ["#ff6384", "#ffcd56", "#36a2eb", "#d251ee"],
          data: [0,1,1,0]
        }]
      },
      options: {
        title: {
          display: true,
          text: 'Grafico del porcentaje de alertas producidas para esta cuenta'
        }
      }
    });
</script>
<!-- Begin Page Level Plugin/Custom Scripts -->
{% endblock%}