{% extends "base.html" %}
{% load static %}
{% block head_content %}
  <title>Mapa - Segursat GPS</title>
  <!-- Begin Page Level Custom Styles -->
  <link href="{% static 'plugins/widgets-map/css/style.css' %}" rel="stylesheet">
  <!-- End Global Mandatory Styles -->
  <script src="{% static 'plugins/leaflet/js/leaflet.js' %}"></script>
  <link rel="stylesheet" href="{% static 'plugins/leaflet/css/leaflet.css' %}">
  <script src="https://kit.fontawesome.com/2ea5efd210.js" crossorigin="anonymous"></script>
  <link href="{% static 'assets/css/components/tabs-accordian/custom-tabs.css' %}" rel="stylesheet">
  <link href="{% static 'plugins/widgets-map/css/marker.css' %}" rel="stylesheet">
  <style>
    .map {
    width: 100%;
    height: 100% }
  </style>
  <!-- End Page Level Custom Styles -->
{% endblock %}
{% block container %}
<div id="content" class="main-content container-map-all" >
  <div class="widget-constent-area">
    <div class="map" id="map"></div>
    <div id="sidebar-map" style="padding-bottom: 0px;">
      <a class="btn-collapse" onclick="app.changeSetting('toggleSidebar');"><i style="color: white;"></i></a>
      <div class="sidebar-map-content">
        <ul class="nav nav-pills mb-3 mt-3 nav-fill" id="justify-pills-tab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="justify-pills-home-tab" data-toggle="pill" href="#justify-pills-home" role="tab" aria-controls="justify-pills-home" aria-selected="true">Objetos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="justify-pills-profile-tab" data-toggle="pill" href="#justify-pills-profile" role="tab" aria-controls="justify-pills-profile" aria-selected="false">Eventos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="justify-pills-contact-tab" data-toggle="pill" href="#justify-pills-contact" role="tab" aria-controls="justify-pills-contact" aria-selected="false">Historicos</a>
          </li>
        </ul>
        <div class="tab-content" id="justify-pills-tabContent">
          <div class="tab-pane fade show active" id="justify-pills-home" role="tabpanel" aria-labelledby="justify-pills-home-tab">
            <div class="col-md-12 pt-3">
              <div class="input-group mb-4">
                <input type="text" class="form-control" placeholder="Buscar" aria-label="notification" aria-describedby="basic-addon2">
              </div>
              <div class="col-md-12">
                <div class="list-group ">
                  <a href="javascript:void(0);" class="list-group-item list-group-item-action">Unidad 1</a>
                  <a href="javascript:void(0);" class="list-group-item list-group-item-action active">Unidad 2</a>
                  <a href="javascript:void(0);" class="list-group-item list-group-item-action">Unidad 3</a>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="justify-pills-profile" role="tabpanel" aria-labelledby="justify-pills-profile-tab">
            <div class="col-md-12 pt-3">
              <div class="media">
                <img class="mr-3" src="{% static 'assets/img/others/perfil.png' %}" alt="Generic placeholder image">
                <div class="media-body">
                  Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="justify-pills-contact" role="tabpanel" aria-labelledby="justify-pills-contact-tab">
            <div class="col-md-12 pt-3">
              <p class="dropcap  dc-outline-primary">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="map-controls">
      <div>
        <div class="btn-group-vertical" role="group">
          <button type="button" class="btn" onclick="app.mapFull();">
            <i class="fas fa-expand-arrows-alt"></i>
          </button>
        </div>
      </div>
      <div id="map-controls-layers">
        <div class="btn-group-vertical" role="group" data-toggle="buttons">
          <label class="btn active">
            <input id="clusterDevice" type="checkbox" autocomplete="off" onchange="app.changeSetting('clusterDevice', this.checked);">
            <span class="icon group-devices"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Ajustar objetos">
            <input id="fitBounds" type="checkbox" autocomplete="off" onchange="app.devices.toggleFitBounds(this.checked);">
            <span class="icon fitBounds"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Objectos">
            <input id="showDevice" type="checkbox" autocomplete="off" onchange="app.changeSetting('showDevice', this.checked);">
            <span class="icon devices"></span>
          </label>
          <label class="btn" data-toggle="tooltip" data-placement="left" title="" data-original-title="Geocercas">
            <input id="showGeofences" type="checkbox" autocomplete="off" onchange="app.changeSetting('showGeofences', this.checked);">
            <span class="icon geofences"></span>
          </label>
          <label class="btn" data-toggle="tooltip" data-placement="left" title="" data-original-title="Rutas">
            <input id="showRoutes" type="checkbox" autocomplete="off" onchange="app.changeSetting('showRoutes', this.checked);">
            <span class="icon routes"></span>
          </label>
          <label class="btn" data-toggle="tooltip" data-placement="left" title="" data-original-title="POI">
            <input id="showPoi" type="checkbox" autocomplete="off" onchange="app.changeSetting('showPoi', this.checked);">
            <span class="icon poi"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Mostrar nombres">
            <input id="showNames" type="checkbox" autocomplete="off" onchange="app.changeSetting('showNames', this.checked);">
            <span class="icon show-name"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Mostrar cruz">
            <input id="showTail" type="checkbox" autocomplete="off" onchange="app.changeSetting('showTail', this.checked);">
            <span class="icon show-tail"></span>
          </label>
          <label class="btn" data-toggle="tooltip" data-placement="left" title="" data-original-title="TrÃ¡fico en vivo">
            <input id="showTraffic" type="checkbox" autocomplete="off" onchange="app.changeSetting('showTraffic', this.checked);">
            <span class="icon traffic"></span>
          </label>
        </div>
      </div>
      <div id="history-control-layers" style="display: none;">
        <div class="btn-group-vertical" role="group" data-toggle="buttons">
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Route">
            <input id="showHistoryRoute" type="checkbox" autocomplete="off" onchange="app.changeSetting('showHistoryRoute', this.checked);">
            <span class="icon routes"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Arrows">
            <input id="showHistoryArrow" type="checkbox" autocomplete="off" onchange="app.changeSetting('showHistoryArrow', this.checked);">
            <span class="icon device"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Stops">
            <input id="showHistoryStop" type="checkbox" autocomplete="off" onchange="app.changeSetting('showHistoryStop', this.checked);">
            <span class="icon parking"></span>
          </label>
          <label class="btn active" data-toggle="tooltip" data-placement="left" title="" data-original-title="Events">
            <input id="showHistoryEvent" type="checkbox" autocomplete="off" onchange="app.changeSetting('showHistoryEvent', this.checked);">
            <span class="icon event"></span>
          </label>
        </div>
      </div>
    </div>
    <!-- End Right Bar -->
    <!-- Begin Bottom Bar -->
    <div id="bottombar" style="padding-left: 300px; z-index: 997;">
      <div id="widgets" data-device-id="1347">
        <a class="btn-collapse" onclick="app.changeSetting('toggleWidgets');"><i style="color: white;"></i></a>
        <div class="widgets-content">
          <div class="widget widget-device">
            <div class="widget-heading">
              <div class="widget-title">
                <div class="widget-actions">
                  <span data-device="status" style="background-color: yellow" title="ACK">ACK</span> <span data-device="status-text">ACK</span>
                </div>
                <i class="icon device"></i>
                <span data-device="name">BMW M5</span>
              </div>
            </div>
            <div class="widget-body">
              <table class="table">
                <tbody>
                  <tr>
                    <td>DirecciÃ³n:</td>
                    <td class="">
                      <span class="pull-right p-relative"><span data-device="preview"><a href="https://www.google.com/maps/place/SEGURSAT+SAC/@-12.095299,-77.059699,15z" target="_blank" class="btn btn-xs btn-default"><i class="fas fa-eye"></i></a></span></span>
                      <span data-device="address" data-lat="19.250127" data-lng="-98.870827">Av. Juan de Aliaga 427, Magdalena del Mar 15076</span>
                    </td>
                  </tr>
                  <tr>
                    <td>Tiempo:</td>
                    <td><span data-device="time">2020-11-09 15:03:39</span></td>
                  </tr>
                  <tr>
                    <td>Tiempo de Parada:</td>
                    <td><span data-device="stop_duration">4min 3s</span></td>
                  </tr>
                  <tr>
                    <td>Conductor:</td>
                    <td><span data-device="driver">Roger Carlos</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="widget widget-sensors">
            <div class="widget-heading">
              <div class="widget-title"><i class="icon sensors"></i> Sensores</div>
            </div>
            <div class="widget-body">
              <div data-device="sensors">
                <table class="table">
                  <tbody>
                    <tr>
                      <td><i class="icon gsm gsm-2"></i>RSSI</td>
                      <td>30 %</td>
                    </tr>
                    <tr>
                      <td><i class="icon door"></i>Bloqueo</td>
                      <td>Apagado</td>
                    </tr>
                    <tr>
                      <td><i class="icon acc"></i>Carga</td>
                      <td>Encendido</td>
                    </tr>
                    <tr>
                      <td><i class="icon gsm gsm-2"></i>GSM</td>
                      <td>40 %</td>
                    </tr>
                  </tbody>
                </table>
                <table class="table">
                  <tbody>
                    <tr>
                      <td><i class="icon battery battery-1"></i>BaterÃ­a</td>
                      <td>6 %</td>
                    </tr>
                    <tr>
                      <td><i class="icon ignition"></i>Encendido</td>
                      <td>Apagado</td>
                    </tr>
                    <tr>
                      <td><i class="icon satellites"></i>Satelites</td>
                      <td>11</td>
                    </tr>
                    <tr>
                      <td><i class="icon speed"></i>Velocidad</td>
                      <td>0 kph</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="widget-empty">
                <a href="javascript:" class="btn btn-default" data-url="" data-modal="sonsors_create" type="button">
                <i class="icon add"></i> Add sensor
                  </a>
              </div>
            </div>
          </div>
          <div class="widget widget-streetview">
            <div class="widget-heading">
              <div class="widget-title">
                <i class="icon streetview"></i> Street view
              </div>
            </div>
            <div class="widget-body">
              <span data-device="streetview" data-size="290x125"><a href="http://maps.google.com/maps?q=&amp;layer=c&amp;cbll=19.25013,-98.87083&amp;cbp=11,96,0,0,0" target="_blank"><img alt="Street view" src="https://demo.gpswox.com/streetview.jpg?size=290x125&amp;location=19.25013,-98.87083&amp;heading=96"></a></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Begin Right Bar -->
  <!-- End Bottom Bar -->
</div>
{% endblock %}
{% block script_content %}
  <script>
    map = L.map('map',{
      center: [-12.105049,-77.027134],
      zoom: 16,
    });
    const openStreetMap = L.tileLayer(
      'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
      {
        attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a>',
        maxZoom: 19,
      }
    );
    const googleStreetsMap = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
      attribution: '&copy; <a href="https://maps.google.com/">Google Maps</a>',
      maxZoom: 20,
      subdomains:['mt0','mt1','mt2','mt3']
    });
    const googleHybridMap = L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}',{
      attribution: '&copy; <a href="https://maps.google.com/">Google Maps</a>',
      maxZoom: 20,
      subdomains:['mt0','mt1','mt2','mt3']
    });
    const baseLayers = {
      'Open Street Maps': openStreetMap,
      'Google Street Maps': googleStreetsMap,
      'Google Hybrid Maps': googleHybridMap
    };
    let overlays = {};
    L.control.layers(baseLayers,overlays).addTo(map);
    baseLayers['Google Street Maps'].addTo(map);

    const icon = L.divIcon({
      iconSize:null,
      html:`
      <div class="map-label">
        <div class="map-label-title">
          DEMO001
        </div>
        <div class="map-label-content">
          <img id="DEMO001CustomMarker" src="/static/assets/img/markers/vehicle.png" width="26" height="48"/>
        </div>
      </div>
      `
    });
    marker = new L.marker(
      [-12.105049, -77.027134],
      {
        icon: icon,
        title: "DEMO001",
      }
    )
    .addTo(map);
  </script>
  <script src="{% static 'plugins/widgets-map/js/core.js' %}"></script>
  <script src="{% static 'plugins/widgets-map/js/app.js' %}"></script>
{% endblock%}